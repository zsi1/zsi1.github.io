<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Zheng Si, Mac</title>
    <link>https://zsi1.github.io/post/index.xml</link>
    <description>Recent content in Posts on Zheng Si, Mac</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016 Your Name</copyright>
    <lastBuildDate>Sun, 05 Mar 2017 00:00:00 +0000</lastBuildDate>
    <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Feb, 28, 2016 -In-Class Project</title>
      <link>https://zsi1.github.io/post/feb-28-2016-in-class-project/</link>
      <pubDate>Sun, 05 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>https://zsi1.github.io/post/feb-28-2016-in-class-project/</guid>
      <description>&lt;div id=&#34;section&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;1&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ckm_nodes&amp;lt;-read.csv(&amp;quot;~/Desktop/Brown_Course/2560/ckm_nodes.csv&amp;quot;,header = TRUE)
dim(ckm_nodes)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 246  13&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;colnames(ckm_nodes)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;city&amp;quot;                         &amp;quot;adoption_date&amp;quot;               
##  [3] &amp;quot;medical_school&amp;quot;               &amp;quot;attend_meetings&amp;quot;             
##  [5] &amp;quot;medical_journals&amp;quot;             &amp;quot;free_time_with&amp;quot;              
##  [7] &amp;quot;discuss_medicine_socially&amp;quot;    &amp;quot;club_with_drs&amp;quot;               
##  [9] &amp;quot;drs_among_three_best_friends&amp;quot; &amp;quot;practicing_here&amp;quot;             
## [11] &amp;quot;office_visits_per_week&amp;quot;       &amp;quot;proximity_to_other_drs&amp;quot;      
## [13] &amp;quot;specialty&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are 246 rows and 13 columns in this ckm_nodes data file and there are columns named city and adoption_date.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(ckm_nodes$adoption_date)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17 Inf 
##  11   9   9  11  11  11  13   7   4   1   5   3   3   4   4   2   1  16&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are 16 doctors never prescribed. There are 121 missing records.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;length(which(is.na(ckm_nodes$adoption_date)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 121&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#summary(ckm_nodes$adoption_date)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-2&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;3&lt;/h2&gt;
&lt;p&gt;A vector called index includes all index of doctor, and the length is 125.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;index&amp;lt;-which(!is.na(ckm_nodes$adoption_date))
length(index)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 125&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cleaned_nodes&amp;lt;-ckm_nodes[index,]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;4&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;adopters&amp;lt;-function(month,not.yet=FALSE){
  if(not.yet==FALSE){ 
  return(as.vector(cleaned_nodes$adoption_date==month))
  } else {
  return(as.vector(cleaned_nodes$adoption_date&amp;gt;month))  
  }
}
adopters(2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
##  [12] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
##  [23] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [45] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [56]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [67] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE
##  [78] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
##  [89] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [100] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
## [111] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [122] FALSE FALSE FALSE FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sum(adopters(2))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 9&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sum(adopters(month=14,not.yet = TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 23&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-4&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;5&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ckm_network&amp;lt;-read.table(&amp;quot;~/Desktop/Brown_Course/2560/ckm_network.dat&amp;quot;,header= FALSE, sep=&amp;quot;&amp;quot;)
clean_networks&amp;lt;-ckm_network[index,index]
dim(clean_networks)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 125 125&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-5&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;6&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;contacts_number&amp;lt;-apply(clean_networks, 1, sum)
contacts_number[41]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 70 
##  3&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;part-2&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Part 2&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;section-6&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;7&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;count_peer_pressure&amp;lt;-function(index,month){
  sum(cleaned_nodes[which(clean_networks[index]==1),2]&amp;lt;=month)
}
count_peer_pressure(37,5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;###
prop_peer_pressure&amp;lt;-function(index,month){
  if(contacts_number[index]==0){
    return(NaN)
  } else {
    return(count_peer_pressure(index,month)/contacts_number[index])
  }
}

prop_peer_pressure(37,5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  37 
## 0.6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;prop_peer_pressure(102,4)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] NaN&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-7&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;8&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;average&amp;lt;-function(month){
  vector&amp;lt;-rep(NA,2)
  #began prescribing in that month
  began&amp;lt;-which(adopters(month,not.yet =FALSE)==TRUE) #docs who began prescribing
  began&amp;lt;-as.matrix(began)
  proportion_1&amp;lt;-apply(began,1,prop_peer_pressure,month=month)
  #after prescribing in that month
  after&amp;lt;-which(adopters(month,not.yet = TRUE))
  after&amp;lt;-as.matrix(as.numeric(after))
  proportion_2&amp;lt;-apply(after,1,prop_peer_pressure,month=month)
  vector[1]&amp;lt;-mean(proportion_1,na.rm=T)
  vector[2]&amp;lt;-mean(proportion_2,na.rm=T)
  return(vector)
}

average(1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.2318182 0.0787518&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;b&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;month&amp;lt;-c(1:17)
month&amp;lt;-as.matrix(month)
average_month&amp;lt;-apply(month,1,average)
average_month_1&amp;lt;-average_month[1,]
average_month_2&amp;lt;-average_month[2,]

plot(month,average_month_1,main=&amp;quot;Average Proportion Over Time&amp;quot;,xlab=&amp;quot;Month&amp;quot;,ylab=&amp;quot;Average Proportion&amp;quot;,col=&amp;quot;green&amp;quot;,type=&amp;quot;o&amp;quot;,xaxt=&amp;quot;n&amp;quot;,yaxt=&amp;quot;n&amp;quot;)
axis(1,at=seq(1,17,1),labels = T)
axis(2,at=seq(0,1,0.1),labels = T)
points(average_month_2,col=&amp;quot;red&amp;quot;,type=&amp;quot;o&amp;quot;)
legend(&amp;quot;topleft&amp;quot;,c(&amp;quot;First Proportion&amp;quot;,&amp;quot;Second Proportion&amp;quot;),col=c(&amp;quot;green&amp;quot;,&amp;quot;red&amp;quot;),lty=c(1,1),bty=&amp;quot;n&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://zsi1.github.io/post/2017-03-05-feb-28-2016-in-class-project_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the difference of two proportions in 8a
proportions&amp;lt;-apply(month,1,average)
proportions&amp;lt;-t(proportions)
boxplot(proportions,main=&amp;quot;Boxplot of Two Average Proportions&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://zsi1.github.io/post/2017-03-05-feb-28-2016-in-class-project_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The doctors who adopt in a given month sometimes donâ€™t have more contacts who are already prescribing than the non-adopters.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Mar-6, 2017 -Pre-Assiganment</title>
      <link>https://zsi1.github.io/post/mar-6-2017-pre-assiganment/</link>
      <pubDate>Sun, 05 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>https://zsi1.github.io/post/mar-6-2017-pre-assiganment/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean.jackknife&amp;lt;-function(x){
est.jackknife&amp;lt;-rep(NA,length(x))  
  for (i in 1:length(x)){
    est.jackknife[i]&amp;lt;-mean(x[-i])
  } 
  n&amp;lt;-length(x)
  jackknife.var&amp;lt;-((n-1)^2/n)*var(est.jackknife)
  jackknife.stderr&amp;lt;-sqrt(jackknife.var)
  return(jackknife.stderr) 
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;some_normals &amp;lt;- rnorm(100,mean=7,sd=5)
mean(some_normals)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 7.031204&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;(formula_se_of_mean &amp;lt;- sd(some_normals)/sqrt(length(some_normals)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.5247049&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;all.equal(formula_se_of_mean,mean.jackknife(some_normals))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean.jackknife(some_normals)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.5247049&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>March 7, 2017-Pre-Class Assignment</title>
      <link>https://zsi1.github.io/post/march-7-2017-pre-class-assignment/</link>
      <pubDate>Sun, 05 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>https://zsi1.github.io/post/march-7-2017-pre-class-assignment/</guid>
      <description>&lt;!-- BLOGDOWN-HEAD --&gt;
&lt;!-- /BLOGDOWN-HEAD --&gt;

&lt;!-- BLOGDOWN-BODY-BEFORE --&gt;
&lt;!-- /BLOGDOWN-BODY-BEFORE --&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean.jackknife&amp;lt;-function(x){
est.jackknife&amp;lt;-rep(NA,length(x))  
  for (i in 1:length(x)){
    est.jackknife[i]&amp;lt;-mean(x[-i])
  } 
  n&amp;lt;-length(x)
  jackknife.var&amp;lt;-((n-1)^2/n)*var(est.jackknife)
  jackknife.stderr&amp;lt;-sqrt(jackknife.var)
  return(jackknife.stderr) 
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;some_normals &amp;lt;- rnorm(100,mean=7,sd=5)
mean(some_normals)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 6.510265&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;(formula_se_of_mean &amp;lt;- sd(some_normals)/sqrt(length(some_normals)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.478992&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;all.equal(formula_se_of_mean,mean.jackknife(some_normals))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean.jackknife(some_normals)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.478992&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
